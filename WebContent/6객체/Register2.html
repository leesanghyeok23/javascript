<!DOCTYPE html>
<html lang="ko">
	<head>
		<meta charset="UTF-8">
		<title>회원가입</title>
	<style>
	.error-message {
		color: red;
		font-size: 12px;
		margin-left: 10px;
	}
	</style>
	
	</head>
	<body>
	
		<form id="signupForm" action="a.jsp">
			<table border="1" align="center">
				<tr>
					<td colspan="2" align="center">회원가입</td>
				</tr>
				<tr>
					<td>*이름</td>
					<td><input type="text" id="uName" /> <span id="uNameError"
						class="error-message"></span></td>
				</tr>
				<tr>
					<td>*ID</td>
					<td><input type="text" id="uID" /> <span id="uIDError"
						class="error-message"></span></td>
				</tr>
				<tr>
					<td>*비밀번호</td>
					<td><input type="password" id="uPWD" /> <span id="uPWDError"
						class="error-message"></span></td>
				</tr>
				<tr>
					<td>*비밀번호 확인</td>
					<td><input type="password" id="uPWD_Confirm" /> <span
						id="uPWDConfirmError" class="error-message"></span></td>
				</tr>
				<tr>
					<td>*직업</td>
					<td><select id="work">
							<option value="">직업명</option>
							<option value="기타">기타</option>
							<option value="회사원">회사원</option>
							<option value="학생">학생</option>
					</select> <span id="workError" class="error-message"></span></td>
				</tr>
				<tr>
					<td>*성별</td>
					<td>남자 <input type="radio" name="sex" value="male" /> 여자 <input
						type="radio" name="sex" value="female" /> <span id="sexError"
						class="error-message"></span>
					</td>
				</tr>
				<tr>
					<td>*취미</td>
					<td><input type="checkbox" name="hobby" value="독서" />독서 <input
						type="checkbox" name="hobby" value="등산" />등산 <input type="checkbox"
						name="hobby" value="낚시" />낚시 <span id="hobbyError"
						class="error-message"></span></td>
				</tr>
				<tr>
					<td>*가입동기</td>
					<td><textarea id="motivation"></textarea> <span
						id="motivationError" class="error-message"></span></td>
				</tr>
				<tr>
					<td colspan="2" align="center">
						<button type="submit">가입</button>
					</td>
				</tr>
			</table>
		</form>
		<script>
			/*
				선택한 요소에 특정 이벤트종류를 등록하고 특정이벤트가 발생했을때 이벤트처리함수를 작성하는 문법
				
				요소선택.addEventListener('등록할이벤트종류명중하나',이벤트를처리할함수function(){});
				
			*/
			//<form>..................<form>
			document.getElementById("signupForm").addEventListener('submit', function(e) {
				
				//가입(전송)버튼을 클릭했을때 <form action="a.jsp"> a.jsp전송 차단
				//유효성 검사를 위해 먼저 <form>에 의한 a.jsp전송 차단
				event.preventDefault();
				
				
				//오류메세지가 이미 표시된 경우는 이를 지우기 위해 모든 오류메세지 내용을 초기화하는 코드 작성
				//class="error-message"인 모든 <span>요소를 선택해서 배열에 담아 가져옵니다.
				document.querySelectorAll(".error-message").forEach(function(event){

					el.textContent = "";
					
				});
				
				//모든 입력값이 유효한지 체크할 변수(기본값true, 만약 오류가 있으면 false로 바뀌게 됨)
				let isValid = true;
				
				
				//참고.string객체의 trim()메소드는 입력값 앞 뒤에 빈공백을 제거해서 문자열을 반환하는 메소드
				//<form>사이에 있는 각 입력값을 얻어서 변수에 저장
				const uName = document.getElementById("uName").value.trim();
				const uID = document.getElementById("uID").value.trim();
				const uPWD = document.getElementById("uPWD").value.trim();
				const uPWDConfirm = document.getElementById("uPWD_Confirm").value.trim();
				const work = document.getElementById("work").value;
				const sex = document.querySelector("input[name='sex']:checked");
				const hobbies = document.querySelectorAll("input[name='hobby']:checked");
				const motivation = document.getElementById("motivation").value.trim();
				
				//유효성 검사 실패시 오류 메세지를 출력하는 함수
				function showError(id, message) {
					//id매개변수로 전달받은 id속성값이 uNameError인 <span>을 선택해서 가져와
					
						document.getElementById(id).textContent = message;
						
						isValid = false;
					
					}
					if(uName === ""){//이름 입력<input>의 value속성값이 비어 있으면?(빈공백문자열로 설정되어 있으면?)
						showError("uNameError","이름을 입력해주세요");
						
					}
					
				}
				
				
				
			});
				
			
			
		</script>
	
	</body>
</html>
